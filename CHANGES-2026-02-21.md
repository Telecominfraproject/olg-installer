# VM Mode Support and ISO Attachment Fix

## Date: 2026-02-21

## Problem
After fresh ISO install, VyOS VM would not boot:
- `virsh console` hung with no output
- VNC showed "No bootable device" error
- VyOS installation ISO was not persistently attached to VM

## Root Cause
The `setup-vyos-bridge.sh` script used `--cdrom` flag in `virt-install`, which only temporarily attaches the ISO.

## Solution
- Replace `--cdrom` with explicit `--disk path=...,device=cdrom`
- Add `--boot cdrom,hd` to set explicit boot order
- Make setup script instructions VM-mode aware

## Files Changed
- `iso-files/setup-vyos-bridge.sh`: Fixed ISO attachment, added VM mode detection
- `docs/VM-MODE-SETUP.md`: New comprehensive VM mode guide

## Testing
- Verified on MS-01 hardware with VM mode
- VyOS boots successfully from persistent ISO
- SSH access works (192.168.3.42)
- Serial console works after install
